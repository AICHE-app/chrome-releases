(()=>{"use strict";const t={encryptedAccessToken:void 0,encryptedRefreshToken:void 0,tokenStorageVersion:void 0,machineId:void 0,deviceId:void 0,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:0,userEmail:"",userId:null,isSubscribed:!1,subscriptionPlan:null,autoPaste:!0,showNotifications:!0,showFloatingWidget:!0,typingSpeed:"instant",historyRetentionDays:30,hasShownWelcome:!1,hasGivenPrivacyConsent:!1,pendingTranscriptions:[],history:[]};let e=null;async function n(){if(e)return{...e};const n=await chrome.storage.local.get("settings"),i={...t,...n.settings||{}};return e=i,i}async function i(t){const i=await n();e={...i,...t},await chrome.storage.local.set({settings:e}),e=null}const s={autoPaste:document.getElementById("auto-paste"),showNotifications:document.getElementById("show-notifications"),showFloatingWidget:document.getElementById("show-floating-widget"),typingSpeed:document.getElementById("typing-speed"),historyRetention:document.getElementById("history-retention"),shortcutsLink:document.getElementById("shortcuts-link"),saveStatus:document.getElementById("save-status")};function o(){s.saveStatus.classList.remove("hidden"),setTimeout(()=>{s.saveStatus.classList.add("hidden")},2e3)}!async function(){await async function(){const t=await n();s.autoPaste.checked=t.autoPaste,s.showNotifications.checked=t.showNotifications,s.showFloatingWidget.checked=t.showFloatingWidget,s.typingSpeed.value=t.typingSpeed,s.historyRetention.value=t.historyRetentionDays.toString()}(),s.autoPaste.addEventListener("change",async()=>{await i({autoPaste:s.autoPaste.checked}),o()}),s.showNotifications.addEventListener("change",async()=>{await i({showNotifications:s.showNotifications.checked}),o()}),s.showFloatingWidget.addEventListener("change",async()=>{await i({showFloatingWidget:s.showFloatingWidget.checked}),o()}),s.typingSpeed.addEventListener("change",async()=>{await i({typingSpeed:s.typingSpeed.value}),o()}),s.historyRetention.addEventListener("change",async()=>{await i({historyRetentionDays:parseInt(s.historyRetention.value)}),o()}),s.shortcutsLink.addEventListener("click",t=>{t.preventDefault(),chrome.tabs.create({url:"chrome://extensions/shortcuts"})})}()})();