const grantBtn=document.getElementById("grant-btn"),status=document.getElementById("status");grantBtn.addEventListener("click",async()=>{try{grantBtn.disabled=!0,status.textContent="Requesting permission...",status.className="",(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(t=>t.stop()),status.textContent="Permission granted! You can close this tab.",status.className="success",setTimeout(()=>{window.close()},2e3)}catch(t){status.textContent="Permission denied. Please try again.",status.className="error",grantBtn.disabled=!1}});