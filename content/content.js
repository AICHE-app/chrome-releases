(()=>{"use strict";function e(e,n=!1){const o=document.activeElement;if(o){if(!function(e,t){try{return e instanceof HTMLElement&&e.focus(),document.execCommand("insertText",!1,t)}catch(e){return!1}}(o,e))return o instanceof HTMLInputElement||o instanceof HTMLTextAreaElement?(function(e,t){const n=e.selectionStart||0,o=e.selectionEnd||0,c=e.value.substring(0,n),s=e.value.substring(o);e.value=c+t+s;const i=n+t.length;e.setSelectionRange(i,i),e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0}))}(o,e),void(n&&t(o))):(c=o)instanceof HTMLElement&&c.isContentEditable?(function(e,t){e.focus();const n=window.getSelection();if(!n||0===n.rangeCount)return void(e.textContent=(e.textContent||"")+t);const o=n.getRangeAt(0);o.deleteContents();const c=document.createTextNode(t);o.insertNode(c),o.setStartAfter(c),o.setEndAfter(c),n.removeAllRanges(),n.addRange(o),e.dispatchEvent(new Event("input",{bubbles:!0}))}(o,e),void(n&&t(o))):void console.warn("[AICHE] Could not paste into element:",o);n&&t(o)}else console.warn("[AICHE] No active element found");var c}function t(e){setTimeout(()=>{const t=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});e.dispatchEvent(t);const n=new KeyboardEvent("keypress",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});e.dispatchEvent(n);const o=new KeyboardEvent("keyup",{key:"Enter",code:"Enter",keyCode:13,which:13,bubbles:!0,cancelable:!0});if(e.dispatchEvent(o),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement){const t=e.closest("form");if(t){const e=t.querySelector('input[type="submit"], button[type="submit"]');e?e.click():t.requestSubmit()}}},50)}window.__aicheContentScriptLoaded||(window.__aicheContentScriptLoaded=!0,chrome.runtime.onMessage.addListener(t=>{"PASTE_TEXT"===t.type?e(t.text,!1):"PASTE_AND_SEND"===t.type&&e(t.text,!0)}))})();